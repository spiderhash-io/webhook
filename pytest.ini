[pytest]
pythonpath = .
asyncio_mode = auto
testpaths = tests
# Only collect files matching test_*.py pattern (excludes performance_test*.py standalone scripts)
python_files = test_*.py
python_classes = Test*
python_functions = test_*
# Standard directories to ignore
norecursedirs = .git .tox dist build *.egg
markers =
    integration: Integration tests that require real services (Redis, RabbitMQ, ClickHouse) and a running FastAPI server
    unit: Unit tests that use mocks and in-process testing
    performance: Performance/load tests that are slow and require running services
    slow: Slow tests that should not run by default
    longrunning: Long-running tests that are excluded by default, use -m longrunning to include them
    todo: Broken tests that need to be fixed, excluded by default
    external_services: Tests that require external services (ClickHouse, Redis, Kafka, PostgreSQL) - excluded by default, use -m external_services to include
addopts = -m "not longrunning and not todo and not external_services and not slow"
